FROM golang:alpine as builder

RUN apk add --no-cache \
    	git \
	make \
	gcc \
	musl-dev

ENV REPOSITORY github.com/kotakanbe/go-cve-dictionary
COPY . $GOPATH/src/$REPOSITORY
RUN cd $GOPATH/src/$REPOSITORY && make install

ENV LOGDIR /var/log/vuls
ENV WORKDIR /vuls

RUN apk add --no-cache ca-certificates \
    && mkdir -p $WORKDIR $LOGDIR

